<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Drom__Configuration_Map (drom_lib.Drom__Configuration_Map)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">drom_lib</a> &#x00BB; Drom__Configuration_Map</nav><h1>Module <code>Drom__Configuration_Map</code></h1><p>Configuration maps.</p><p>A configuration map holds a dictionary mapping configuration keys to configuration values. Values available in a configuration map can retrieved based on a <i>key</i> or consumed by an <i>editor</i>. Configuration maps can be combined together.</p><nav class="toc"><ul><li><a href="#keys-and-value-retrieval">Keys and value retrieval</a></li><li><a href="#functional-edition-of-program-parameters">Functional edition of program parameters</a></li><li><a href="#operations-on-configuration-maps">Operations on configuration maps</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>The abstract type of configuration maps.</p></dd></dl><section><header><h6 id="keys-and-value-retrieval"><a href="#keys-and-value-retrieval" class="anchor"></a>Keys and value retrieval</h6><p>Configuration values are retrieved by a user defined function of type <code>string -&gt; 'a</code>. This function is expected to not have any side-effect. It must reports errors using the <code>Invalid_argument</code> or <code>Failure</code> exceptions. This specification allows to use the various <code>*_of_string</code> function in the standard library to examine configuration values.</p></header><dl><dt class="spec type" id="type-key"><a href="#type-key" class="anchor"></a><code><span class="keyword">type</span> <span>'a key</span></code><code> = </code><code>{</code><table class="record"><tr id="type-key.of_string" class="anchored"><td class="def field"><a href="#type-key.of_string" class="anchor"></a><code>of_string : string <span>&#45;&gt;</span> <span class="type-var">'a</span>;</code></td></tr><tr id="type-key.path" class="anchored"><td class="def field"><a href="#type-key.path" class="anchor"></a><code>path : <span>string list</span>;</code></td></tr><tr id="type-key.name" class="anchored"><td class="def field"><a href="#type-key.name" class="anchor"></a><code>name : string;</code></td></tr><tr id="type-key.default" class="anchored"><td class="def field"><a href="#type-key.default" class="anchor"></a><code>default : <span class="type-var">'a</span>;</code></td></tr><tr id="type-key.description" class="anchored"><td class="def field"><a href="#type-key.description" class="anchor"></a><code>description : string;</code></td></tr></table><code>}</code></dt><dd><p>The type of configuration keys. A configuration key can be used to retrieve a configuration value.</p></dd></dl><dl><dt class="spec value" id="val-key"><a href="#val-key" class="anchor"></a><code><span class="keyword">val</span> key : <span>(string <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span>string list</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-key">key</a></span></code></dt><dd><p><code>key concrete path name default description</code> create a key out of its given parts.</p></dd></dl><dl><dt class="spec value" id="val-get"><a href="#val-get" class="anchor"></a><code><span class="keyword">val</span> get : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-key">key</a></span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Get the value associated with an key. If there is no associated value, then the default value from the key is returned.</p><dl><dt>raises Failure</dt><dd><p>if the value cannot be formatted.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-value"><a href="#val-value" class="anchor"></a><code><span class="keyword">val</span> value : <span><span class="type-var">'a</span> <a href="index.html#type-key">key</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>value key text</code> get the value associated to <code>text</code> as if it were assigned to <code>key</code>.</p></dd></dl></section><section><header><h6 id="functional-edition-of-program-parameters"><a href="#functional-edition-of-program-parameters" class="anchor"></a>Functional edition of program parameters</h6></header><dl><dt class="spec type" id="type-editor"><a href="#type-editor" class="anchor"></a><code><span class="keyword">type</span> <span>'b editor</span></code></dt><dd><p>The abstract type of functional configuration editors, functionally editing a value of type <code>'b</code>.</p></dd></dl><dl><dt class="spec value" id="val-editor"><a href="#val-editor" class="anchor"></a><code><span class="keyword">val</span> editor : <span><span class="type-var">'a</span> <a href="index.html#type-key">key</a></span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-editor">editor</a></span></code></dt><dd><p><code>editor key edit</code> create a functional configuration editor consuming keys described by <code>key</code> and functionally editing a value of type <code>'b</code> with <code>edit</code>.</p></dd></dl><dl><dt class="spec value" id="val-xmap"><a href="#val-xmap" class="anchor"></a><code><span class="keyword">val</span> xmap : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span>(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-editor">editor</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-editor">editor</a></span></code></dt><dd><p><code>xmap get set editor</code> convert an editor functionally modifying a value of type <code>'b</code> in an editor functionally modifying a value of type <code>'a</code>. This can be used in conjunction with lenses to separately configure the different modules of an application.</p></dd></dl><dl><dt class="spec value" id="val-apply"><a href="#val-apply" class="anchor"></a><code><span class="keyword">val</span> apply : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-editor">editor</a></span> <span>&#45;&gt;</span> <span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'b</span></code></dt><dd><p>Explicitely edit the given value with the provided editor.</p></dd></dl></section><section><header><h6 id="operations-on-configuration-maps"><a href="#operations-on-configuration-maps" class="anchor"></a>Operations on configuration maps</h6></header><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : <a href="index.html#type-t">t</a></code></dt><dd><p>The empty configuration map.</p></dd></dl><dl><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : <span>(<span>string list</span> * string)</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Add a configuration binding.</p></dd></dl><dl><dt class="spec value" id="val-merge"><a href="#val-merge" class="anchor"></a><code><span class="keyword">val</span> merge : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>merge a b</code> a configuration map looking up values in <code>a</code> then in <code>b</code>.</p></dd></dl><dl><dt class="spec value" id="val-override"><a href="#val-override" class="anchor"></a><code><span class="keyword">val</span> override : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>override a b</code> a configuration map whose keys are the same as <code>a</code> and the values are possibly overriden by those found in <code>b</code>.</p></dd></dl><dl><dt class="spec value" id="val-from_file"><a href="#val-from_file" class="anchor"></a><code><span class="keyword">val</span> from_file : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Read configuration values from a file.</p></dd></dl><dl><dt class="spec value" id="val-from_string"><a href="#val-from_string" class="anchor"></a><code><span class="keyword">val</span> from_string : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Read configuration values from a string.</p></dd></dl><dl><dt class="spec value" id="val-from_alist"><a href="#val-from_alist" class="anchor"></a><code><span class="keyword">val</span> from_alist : <span><span>(<span>(<span>string list</span> * string)</span> * string)</span> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Read configuration values from an alist.</p></dd></dl><dl><dt class="spec value" id="val-to_alist"><a href="#val-to_alist" class="anchor"></a><code><span class="keyword">val</span> to_alist : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(<span>(<span>string list</span> * string)</span> * string)</span> list</span></code></dt><dd><p>Convert configuration values to an alist.</p></dd></dl></section></div></body></html>